# CHANGELOG

## 2025-12-29
### 修正: オッズ取得ロジックの改善
**問題**: 終了したレースのオッズを取得しようとすると、別のレース（現在開催中）のオッズが返されてしまう
**原因**: netkeibaのオッズページは開催中のレースのみオッズを返し、終了したレースにアクセスすると同じレース番号の当日レースのオッズが表示される
**変更内容**:
- `api/main.py` の `get_odds()` メソッドを改善:
  - 馬名リストを引数で受け取り、オッズページの馬名と照合して正しいレースか確認
  - 不一致の場合は結果ページから払戻金を取得（勝ち馬のオッズのみ）
  - 開催中のレースは正常にオッズ取得可能

### 機能追加: FastAPI バックエンド
**変更内容**:
- `api/main.py` を新規作成
  - Next.jsフロントエンドから呼び出せるREST APIを実装
  - エンドポイント:
    - `GET /api/tracks` - 競馬場一覧取得
    - `POST /api/predict` - 予測実行
  - CORS対応
  - 既存のスクレイパー・前処理ロジックを流用

- `requirements.txt` にFastAPI/uvicorn依存関係を追加
  ```
  fastapi>=0.104.0
  uvicorn>=0.24.0
  ```

### 機能追加: デプロイ設定
**変更内容**:
- `Dockerfile` を新規作成 - Docker コンテナ化
- `render.yaml` を新規作成 - Render.com デプロイ設定
